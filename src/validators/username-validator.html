<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/iron-validator-behavior/iron-validator-behavior.html">

<dom-module id="username-validator">
    <script>
        class UsernameValidator extends Polymer.mixinBehaviors([Polymer.IronValidatorBehavior], Polymer.Element) {

            static get is() { return 'username-validator'; }

            static get properties() {
                return {
                    errorMessage: {
                        type: String,
                        notify: true
                    },
                    isValid: {
                        type: Boolean,
                        notify: true
                    }
                }
            }

            constructor() {
                super();
            }

            validate(value){

                this.errorMessage = '';
                var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                if (!re.test(String(value).toLowerCase())) {
                    this.errorMessage = 'Username is invalid (should me email adress)';
                    this.isValid = false;
                    return false;
                }
                this.isValid = true;
                return true;
            }


        }

        window.customElements.define(UsernameValidator.is, UsernameValidator);
    </script>




</dom-module>



